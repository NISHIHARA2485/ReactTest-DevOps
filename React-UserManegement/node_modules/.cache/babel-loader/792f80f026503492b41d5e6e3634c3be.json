{"ast":null,"code":"import _slicedToArray from \"C:\\\\React\\\\React-UserManegement\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";\n\nvar _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useCallback, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useMessage } from \"./useMessage\";\nexport var useAuth = function useAuth() {\n  _s();\n\n  var history = useHistory();\n\n  var _useMessage = useMessage(),\n      showMessage = _useMessage.showMessage;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var login = useCallback(function (id) {\n    setLoading(true);\n    axios.get(\"https://jsonplaceholder.typicode.com/users/\".concat(id)).then(function (res) {\n      if (res.data) {\n        showMessage({\n          title: \"ログインしました\",\n          status: \"success\"\n        });\n        history.push(\"/home\");\n      } else {\n        showMessage({\n          title: \"ユーザーが見つかりません\",\n          status: \"error\"\n        });\n      }\n    }).catch(function () {\n      return showMessage({\n        title: \"ログインできません\",\n        status: \"error\"\n      });\n    }).finally(function () {\n      return setLoading(false);\n    });\n  }, [history]);\n  return {\n    login: login,\n    loading: loading\n  };\n};\n\n_s(useAuth, \"8Rzhg6z/ZFhEHFfu0rj4L7pdL4Y=\", false, function () {\n  return [useHistory, useMessage];\n});","map":{"version":3,"sources":["C:/React/React-UserManegement/src/hooks/useAuth.ts"],"names":["axios","useCallback","useState","useHistory","useMessage","useAuth","history","showMessage","loading","setLoading","login","id","get","then","res","data","title","status","push","catch","finally"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,SAASC,UAAT,QAA2B,cAA3B;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAAA;;AAC3B,MAAMC,OAAO,GAAGH,UAAU,EAA1B;;AACA,oBAAwBC,UAAU,EAAlC;AAAA,MAAQG,WAAR,eAAQA,WAAR;;AACA,kBAA8BL,QAAQ,CAAC,KAAD,CAAtC;AAAA;AAAA,MAAOM,OAAP;AAAA,MAAgBC,UAAhB;;AACA,MAAMC,KAAK,GAAGT,WAAW,CACvB,UAACU,EAAD,EAAgB;AACdF,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAT,IAAAA,KAAK,CACFY,GADH,sDAC2DD,EAD3D,GAEGE,IAFH,CAEQ,UAACC,GAAD,EAAS;AACb,UAAIA,GAAG,CAACC,IAAR,EAAc;AACZR,QAAAA,WAAW,CAAC;AAAES,UAAAA,KAAK,EAAE,UAAT;AAAqBC,UAAAA,MAAM,EAAE;AAA7B,SAAD,CAAX;AACAX,QAAAA,OAAO,CAACY,IAAR,CAAa,OAAb;AACD,OAHD,MAGO;AACLX,QAAAA,WAAW,CAAC;AAAES,UAAAA,KAAK,EAAE,cAAT;AAAyBC,UAAAA,MAAM,EAAE;AAAjC,SAAD,CAAX;AACD;AACF,KATH,EAUGE,KAVH,CAUS;AAAA,aACLZ,WAAW,CAAC;AAAES,QAAAA,KAAK,EAAE,WAAT;AAAsBC,QAAAA,MAAM,EAAE;AAA9B,OAAD,CADN;AAAA,KAVT,EAaGG,OAbH,CAaW;AAAA,aAAMX,UAAU,CAAC,KAAD,CAAhB;AAAA,KAbX;AAcD,GAjBsB,EAkBvB,CAACH,OAAD,CAlBuB,CAAzB;AAoBA,SAAO;AAAEI,IAAAA,KAAK,EAALA,KAAF;AAASF,IAAAA,OAAO,EAAPA;AAAT,GAAP;AACD,CAzBM;;GAAMH,O;UACKF,U,EACQC,U","sourcesContent":["import axios from \"axios\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { User } from \"../types/api/user\";\r\nimport { useMessage } from \"./useMessage\";\r\n\r\nexport const useAuth = () => {\r\n  const history = useHistory();\r\n  const { showMessage } = useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const login = useCallback(\r\n    (id: string) => {\r\n      setLoading(true);\r\n      axios\r\n        .get<User>(`https://jsonplaceholder.typicode.com/users/${id}`)\r\n        .then((res) => {\r\n          if (res.data) {\r\n            showMessage({ title: \"ログインしました\", status: \"success\" });\r\n            history.push(\"/home\");\r\n          } else {\r\n            showMessage({ title: \"ユーザーが見つかりません\", status: \"error\" });\r\n          }\r\n        })\r\n        .catch(() =>\r\n          showMessage({ title: \"ログインできません\", status: \"error\" })\r\n        )\r\n        .finally(() => setLoading(false));\r\n    },\r\n    [history]\r\n  );\r\n  return { login, loading };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}